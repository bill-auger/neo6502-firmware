
; 64tass Turbo Assembler Macro V1.59.3120 listing file
; 64tass -b --mr65c02 -Wall -o build/kernel.bin -L build/kernel.lst kernel.asm
; Wed Nov 22 17:01:56 2023

;Offset	;Hex		;Monitor	;Source

;******  Processing input file: kernel.asm

=$ff00						DCommand = $FF00
=$ff01						DFunction = $FF01
=$ff02						DError = $FF02
=$ff03						DControl = $FF03
=$ff04						DParameters = $FF04
=$ff0c						DTopOfStack = $FF0C

;******  Processing file: support.asm

.fc00					KWriteCharacter:
.fc00	20 27 fc	jsr $fc27		jsr KWaitProcess
.fc03	29 7f		and #$7f		and #$7f
.fc05	8d 04 ff	sta $ff04		sta $FF04
.fc08	a9 00		lda #$00		lda #0
.fc0a	8d 01 ff	sta $ff01		sta $FF01
.fc0d	a9 01		lda #$01		lda #1
.fc0f	8d 00 ff	sta $ff00		sta $FF00
.fc12	60		rts			rts
.fc13					KReadCharacter:
.fc13	20 27 fc	jsr $fc27		jsr 	KWaitProcess
.fc16	a9 01		lda #$01		lda 	#1
.fc18	8d 01 ff	sta $ff01		sta		$FF01
.fc1b	8d 00 ff	sta $ff00		sta 	$FF00
.fc1e	20 27 fc	jsr $fc27		jsr 	KWaitProcess
.fc21	ad 04 ff	lda $ff04		lda 	$FF04
.fc24	f0 ed		beq $fc13		beq 	KReadCharacter
.fc26	60		rts			rts
.fc27					KWaitProcess:
.fc27	48		pha			pha
.fc28					KWaitProcess1:
.fc28	ad 00 ff	lda $ff00		lda $FF00
.fc2b	d0 fb		bne $fc28		bne KWaitProcess1
.fc2d	68		pla			pla
.fc2e	60		rts			rts

;******  Return to file: kernel.asm


;******  Processing file: wozmon.asm

.fc2f					PrintHexByte:
.fc2f	48		pha			pha
.fc30	4a		lsr a			lsr 	a
.fc31	4a		lsr a			lsr 	a
.fc32	4a		lsr a			lsr 	a
.fc33	4a		lsr a			lsr 	a
.fc34	20 38 fc	jsr $fc38		jsr 	_PrintHexNibble
.fc37	68		pla			pla
.fc38					_PrintHexNibble:
.fc38	29 0f		and #$0f		and 	#15
.fc3a	c9 0a		cmp #$0a		cmp 	#10
.fc3c	90 02		bcc $fc40		bcc 	_nothex
.fc3e	69 06		adc #$06		adc 	#6
.fc40					_nothex:
.fc40	69 30		adc #$30		adc 	#48
.fc42	20 00 fc	jsr $fc00		jsr 	KWriteCharacter
.fc45	60		rts			rts

;******  Return to file: kernel.asm

.fc46					start
.fc46	d8		cld			cld
.fc47	58		cli			cli
.fc48	a2 ff		ldx #$ff		ldx #$ff
.fc4a	9a		txs			txs
.fc4b	a9 2a		lda #$2a		lda 	#42
.fc4d	20 00 fc	jsr $fc00		jsr 	KWriteCharacter
.fc50	20 13 fc	jsr $fc13		jsr 	KReadCharacter
.fc53	20 2f fc	jsr $fc2f		jsr 	PrintHexByte
.fc56	a9 ff		lda #$ff		lda 	#-1
.fc58	85 81		sta $81			sta 	$81
.fc5a					loop2:
.fc5a	20 7e fc	jsr $fc7e		jsr 	alphabet
.fc5d	e6 81		inc $81			inc 	$81
.fc5f	a5 81		lda $81			lda 	$81
.fc61	20 2f fc	jsr $fc2f		jsr 	PrintHexByte
.fc64	a9 0d		lda #$0d		lda 	#13
.fc66	20 00 fc	jsr $fc00		jsr 	KWriteCharacter
.fc69	a9 0a		lda #$0a		lda 	#10
.fc6b	20 70 fc	jsr $fc70		jsr 	delay
.fc6e					_opcode:
.fc6e	80 ea		bra $fc5a		bra 	loop2
.fc70					delay:
.fc70	a0 00		ldy #$00		ldy 	#0
.fc72	a2 00		ldx #$00		ldx 	#0
.fc74					loop1:
.fc74	88		dey			dey
.fc75	d0 fd		bne $fc74		bne 	loop1
.fc77	ca		dex			dex
.fc78	d0 fa		bne $fc74		bne 	loop1
.fc7a	3a		dec a			dec		a
.fc7b	d0 f7		bne $fc74		bne 	loop1
.fc7d	60		rts			rts
.fc7e					alphabet:
.fc7e	a2 05		ldx #$05		ldx 	#5
.fc80	da		phx			phx
.fc81	7a		ply			ply
.fc82					_loop1:
.fc82	98		tya			tya
.fc83	18		clc			clc
.fc84	69 1c		adc #$1c		adc 	#$1C
.fc86	20 2f fc	jsr $fc2f		jsr PrintHexByte
.fc89	88		dey			dey
.fc8a	10 f6		bpl $fc82		bpl 	_loop1
.fc8c	a9 2a		lda #$2a		lda 	#42
.fc8e	20 2f fc	jsr $fc2f		jsr 	PrintHexByte
.fc91	60		rts			rts
>ff00	00 00 00 00 00 00 00 00			.word 	0,0,0,0,0,0,0,0
>ff08	00 00 00 00 00 00 00 00
>fffa	46 fc					.word 	start
>fffc	46 fc					.word 	start
>fffe	46 fc					.word 	start

;******  End of listing
