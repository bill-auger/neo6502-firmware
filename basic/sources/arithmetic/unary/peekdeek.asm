; ************************************************************************************************
; ************************************************************************************************
;
;		Name:		peekdeek.asm
;		Purpose:	Peek() and Deek()
;		Created:	7th December 2003
;		Reviewed: 	No
;		Author:		Paul Robson (paul@robsons.org.uk)
;
; ************************************************************************************************
; ************************************************************************************************

		.section code

; ************************************************************************************************
;
; 											Entry points
;
; ************************************************************************************************

PeekUnary: ;; [peek(]
		sec
		bra 	PeekDeekCommon
DeekUnary: ;; [deek(]
		clc

PeekDeekCommon:
		php
		jsr 	EXPEvalInteger16			; address
		jsr 	ERRCheckRParen
		lda 	XSNumber0,x
		sta 	zTemp0
		lda 	XSNumber1,x
		sta 	zTemp0+1
		;
		lda 	(zTemp0)
		sta 	XSNumber0,x
		stz 	XSNumber1,x
		plp
		bcs 	_PDExit
		phy
		ldy 	#1
		lda 	(zTemp0),y
		sta 	XSNumber1,x
		ply
_PDExit:
		rts

		.send code

; ************************************************************************************************
;
;									Changes and Updates
;
; ************************************************************************************************
;
;		Date			Notes
;		==== 			=====
;
; ************************************************************************************************
