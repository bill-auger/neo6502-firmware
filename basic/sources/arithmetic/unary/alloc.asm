; ************************************************************************************************
; ************************************************************************************************
;
;		Name:		alloc.asm
;		Purpose:	Allocate memory
;		Created:	11th December 2023
;		Reviewed:   No
;		Author:		Paul Robson (paul@robsons.org.uk)
;
; ************************************************************************************************
; ************************************************************************************************

; ************************************************************************************************
;
;											Allocate memory
;
; ************************************************************************************************

		.section code	

EXPUnaryAlloc: ;; [alloc(]
		jsr 	EXPEvalInteger16 				; amount to allocate
		jsr 	ERRCheckRParen
		phy
		ldy 	XSNumber1,x 					; allocate it.
		lda	 	XSNumber0,x
		jsr 	MemoryAllocateYA

		sta 	XSNumber0,x 					; return adddres
		sty 	XSNumber1,x
		stz 	XSNumber2,x
		stz 	XSNumber3,x
		stz 	XSControl,x
		ply
		rts

		.send code


; ************************************************************************************************
;
;									Changes and Updates
;
; ************************************************************************************************
;
;		Date			Notes
;		==== 			=====
;
; ************************************************************************************************

