; ************************************************************************************************
; ************************************************************************************************
;
;		Name:		let.asm
;		Purpose:	Assignment statement
;		Created:	6th December 2023
;		Reviewed:   No
;		Author:		Paul Robson (paul@robsons.org.uk)
;
; ************************************************************************************************
; ************************************************************************************************

; ************************************************************************************************
;
;								LET <reference> = <value>
;
; ************************************************************************************************

		.section code

Command_Let: ;; [let]
		ldx 	#0 							; slot 0, same precedence as ! operator -1
		jsr 	EvaluateTerm 				; term, which is the variable to assign to in slot 0.
		lda 	#KWD_EQUAL 					; check '=' operator.
		jsr 	ERRCheckA
		inx
		jsr 	EXPEvaluateExpressionAtX	; get a value
		jsr 	DereferenceTOS				; dereference it
		dex
		jsr 	AssignValueToReference
		rts
		
; ************************************************************************************************
;
;									Assign value X+1 to reference X
;
; ************************************************************************************************

AssignValueToReference:
		.byte 	3

		.send code
				
; ************************************************************************************************
;
;									Changes and Updates
;
; ************************************************************************************************
;
;		Date			Notes
;		==== 			=====
;
; ************************************************************************************************

